fn fp_const_macro(name: &str, x32: f32, x64: f64) {
    println!(
        "
; Build {x64} as a floating-point of the given width.
(macro ({name} w)
    (conv_to w
        (switch w
            (32 #x{:016x})
            (64 #x{:016x})
       )
    )
)",
        x32.to_bits(),
        x64.to_bits()
    );
}

fn fp_const_macros(name: &str, x32: f32, x64: f64) {
    fp_const_macro(&format!("fp_{name}"), x32, x64);
    fp_const_macro(&format!("fp_minus_{name}"), -x32, -x64);
}

fn main() {
    println!(";; GENERATED BY `fpconst`. DO NOT EDIT!!!");

    fp_const_macros("one", 1.0, 1.0);
    fp_const_macros("half", 0.5, 0.5);
}
